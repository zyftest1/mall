!function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n=i(1);n.doProtect();var a=i(2);for(var s in a)a[s]=i(3)("./"+a[s]+"/index");var o=i(27),r={init:function(t,e){return"undefined"==typeof e||null==e||-1==e?(console.warn("warning: data="+e),!1):(this.$container=t,this.data=e.mods,this.screenType=parseInt(e.screenType)||0,this.ovboxMaxWidth=this.screenType?1200:960,this.defaultFeedWall=parseInt(e.showDefaultWall)||0,this.screenType?$("body").addClass("media_screen_1200").removeClass("media_screen_960"):$("body").addClass("media_screen_960").removeClass("media_screen_1200"),this.renderLayout(),this.renderDetail(),this.renderBg(),!0)},renderLayout:function(){var t,e=this,i=e.data,n=3,a=i.length,s=[],o=[];for(t=0;a>t;t++){var r=t,c=0;if(""!=i[t].id&&null!=i[t].id||console.warn("mod-item id is null or undefined! please check it!"),"promotions"!==i[t].type||!i[t].content.isShow||0!=i[t].content.isShow)if("bgSetting"!==i[t].type){if("topNav"!==i[t].type&&"topBanner"!==i[t].type)if("topSilderBanner"===i[t].type){o.push(['<div class="ovbox mod_',i[t].type,'">','<div class="mod_list clearfix">'].join(""));for(var l="";a>r&&n>=r-t+1;){if(o.push(['<div class="',"mod_item w",i[r].width,'"','data-id="',i[r].id,'"','data-width="',i[r].width,'"','data-type="',i[r].type,'"','data-title="',i[r].layoutName,'">',"</div>"].join("")),c+=parseInt(i[r].width)+10*(r-t+1),l+="	"+i[r].type+"("+i[r].width+")",c>=e.ovboxMaxWidth){o.push("</div></div>"),t=r;break}r++}}else{s.push(['<div class="ovbox mod_',i[t].type,'">','<div class="mod_list clearfix">'].join(""));for(var l="";a>r&&n>=r-t+1;){if(s.push(['<div class="',"mod_item w",i[r].width,'"','data-id="',i[r].id,'"','data-width="',i[r].width,'"','data-type="',i[r].type,'"','data-title="',i[r].layoutName,'">',"</div>"].join("")),c+=parseInt(i[r].width)+10*(r-t+1),l+="	"+i[r].type+"("+i[r].width+")",c>=e.ovboxMaxWidth){s.push("</div></div>"),t=r;break}r++}}}else e.bgData=i[t]}e._topArr=o.join(""),$(e._topArr).insertBefore(e.$container),e.arr=s.join("");var d=$("#shopFeed");d.length>0?$(e.arr).insertBefore(d):e.$container.append(e.arr)},_getModData:function(t){var e=this,i=t.data(),n={path:i.type,content:"",index:i.id};return $.each(e.data,function(t,e){Number(e.id)===i.id&&(n.content=e.content||"")}),n.path?n:(console.warn(">>该modItem的type:"+i.type+"没有对应的widget"),!1)},renderDetail:function(){var t=this;$(".mod_item").each(function(e,i){var n=$(i),s=n.data("type");if("topBanner"==s||"topNav"==s)return!0;var o=t._getModData(n);if(o){var r=a[o.path]||!1;r&&new r(n,o.content)}else;})},renderBg:function(){var t=this;if(t.bgData&&t.bgData.content){var e=a.bgSetting;new e(null,t.bgData.content,null)}}};$(function(){var t=window.__tmp._shopIndexData,e=-1==t?!1:r.init($("#shop-main"),t),i=function(){$(".ovbox").length<=0||$("body").hasClass("media_screen_1200")||$(".ovbox").each(function(t,e){var i=$(e).find(".mod_item");return i.length<=1?!0:void(240==i.last().attr("data-width")&&i.last().hide())})},n=function(){var t=$(".__custom_module_trace");t.on("click","a",function(t){var e=$(this),i=e.parents(".__custom_module_trace"),n=i.data("trace");n&&MOGU.Globe_Trace_Log(n)})};if(i(),n(),parseInt($("#defaultFeedWall").val())){o.feedList.init();var a=$("#shop-main").children("div:not(#shopFeed)").length<=0,s=$(window),c=parseInt($("#shopFeed").offset().top)-parseInt(s.scrollTop())+parseInt($("#shopFeed>.nav").outerHeight(!0))<parseInt(s.height()),l=(a?"#shop-main>div:not(#shopFeed) is empty!\r\n":"")+(c?"#shopFeed is in screen!":"");""!=l&&console.log(l);var d=!e||a||c;d&&(console.log("Need load default feed data(first-screen)"),o.feedList.load())}else console.log("defaultFeedWall is hidden by setting")})},function(t,e){var i=function(){function t(){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},e=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(e,function(e){return t[e]||e}):this}}function e(t,i,n){return("string"==typeof i?i:i.toString()).replace(t.define||o,function(e,i,a,s){return 0===i.indexOf("def.")&&(i=i.substring(4)),i in n||(":"===a?(t.defineParams&&s.replace(t.defineParams,function(t,e,a){n[i]={arg:e,text:a}}),i in n||(n[i]=s)):new Function("def","def['"+i+"']="+s)(n)),""}).replace(t.use||o,function(i,a){t.useParams&&(a=a.replace(t.useParams,function(t,e,i,a){if(n[i]&&n[i].arg&&a){var s=(i+":"+a).replace(/'|\\/g,"_");return n.__exp=n.__exp||{},n.__exp[s]=n[i].text.replace(new RegExp("(^|[^\\w$])"+n[i].arg+"([^\\w$])","g"),"$1"+a+"$2"),e+"def.__exp['"+s+"']"}}));var s=new Function("def","return "+a)(n);return s?e(t,s,n):s})}function i(t){return t.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}function n(){MoGu&&MoGu.ui&&MoGu.ui.getdoT&&MoGu.ui.getTemplate||(MoGu?MoGu.ui?MoGu.ui.getdoT?MoGu.ui.getTemplate||console.warn("window.MoGu.ui.getTemplate is "+MoGu.ui.getTemplate):console.warn("window.MoGu.ui.getdoT is "+MoGu.ui.getdoT):console.warn("window.MoGu.ui is "+MoGu.ui):console.warn("window.MoGu is "+MoGu),window.doT=window.doT||a,window.MoGu=window.MoGu||{},window.MoGu.ui=window.MoGu.ui||{getTemplate:function(t,e){try{return a.template(t)(e)}catch(i){return i}},getdoT:function(){return console.warn("正在调用保护代码protectDoT.js里的 MoGu.ui.getdoT()..."),a}})}window.console=window.console||{log:function(){},warn:function(){}};var a={version:"1.0.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0};String.prototype.encodeHTML||(String.prototype.encodeHTML=t());var s={append:{start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},split:{start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"}},o=/$^/;return a.template=function(n,r,c){r=r||a.templateSettings;var l,d,p=r.append?s.append:s.split,u=0,h=r.use||r.define?e(r,n,c||{}):n;h=("var out='"+(r.strip?h.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):h).replace(/'|\\/g,"\\$&").replace(r.interpolate||o,function(t,e){return p.start+i(e)+p.end}).replace(r.encode||o,function(t,e){return l=!0,p.start+i(e)+p.endencode}).replace(r.conditional||o,function(t,e,n){return e?n?"';}else if("+i(n)+"){out+='":"';}else{out+='":n?"';if("+i(n)+"){out+='":"';}out+='"}).replace(r.iterate||o,function(t,e,n,a){return e?(u+=1,d=a||"i"+u,e=i(e),"';var arr"+u+"="+e+";if(arr"+u+"){var "+n+","+d+"=-1,l"+u+"=arr"+u+".length-1;while("+d+"<l"+u+"){"+n+"=arr"+u+"["+d+"+=1];out+='"):"';} } out+='"}).replace(r.evaluate||o,function(t,e){return"';"+i(e)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+="),l&&r.selfcontained&&(h="String.prototype.encodeHTML=("+t.toString()+"());"+h);try{return new Function(r.varname,h)}catch(g){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+h),g}},a.compile=function(t,e){return a.template(t,null,e)},{doT:a,doProtect:n}}();t.exports=i},function(t,e){t.exports={bgSetting:"modesWidget/bgSetting",promotions:"modesWidget/promotions",topSilderBanner:"modesWidget/topSilderBanner",picture:"modesWidget/picture",silderBanner:"modesWidget/silderBanner",puzzleImg:"modesWidget/puzzleImg",customWall:"modesWidget/customWall",customMod:"modesWidget/customMod",singlePicture:"modesWidget/singlePicture"}},function(t,e,i){function n(t){return i(a(t))}function a(t){return s[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var s={"./modesWidget/bgSetting/index":4,"./modesWidget/customMod/index":6,"./modesWidget/customWall/index":8,"./modesWidget/picture/index":10,"./modesWidget/promotions/index":12,"./modesWidget/puzzleImg/index":14,"./modesWidget/silderBanner/index":16,"./modesWidget/singlePicture/index":19,"./modesWidget/topBanner/index":21,"./modesWidget/topNav/index":23,"./modesWidget/topSilderBanner/index":25};n.keys=function(){return Object.keys(s)},n.resolve=a,t.exports=n,n.id=3},function(t,e,i){var n=i(5),a=function(t,e,i){this.tpl=n,this.$container=t||$(".shop-main").eq(0),this.data=e,this.callback=i,this.init(),this.render()};a.prototype={type:"bgSetting",getTplDomStr:function(){var t=this;return MoGu.ui.getdoT().template(t.tpl)(t.data)},init:function(){},render:function(){var t=$("#bg_style");t&&t.length>0&&t.remove(),this.$container.prepend(this.getTplDomStr()),this.callback&&this.callback.call(this,this.$container),console.log("bgSetting-render")}},t.exports=a},function(t,e){t.exports=['<style id="bg_style" class="a2">',"body { ","background-image: ","{{ if(it.src) { }}","url({{=it.src}})","{{ } else { }}","none","{{ } }}","; background-repeat: ","{{ if(it.repeat) { }}","{{=it.repeat}}","{{ } else { }}","no-repeat","{{ } }}","; background-position: ","{{ if(it.position) { }}","{{=it.position}}","{{ } else { }}","left top","{{ } }}"," }","</style>"].join("")},function(t,e,i){var n=i(7),a=function(t,e,i){this.tpl=n,this.$container=t||!1,this.data=e,this.callback=i,this.init(),this.render()};a.prototype={type:"customMod",getTplDomStr:function(){var t=this;return MoGu.ui.getdoT().template(t.tpl)(t.data)},init:function(){},render:function(){console.log("customMod-render"),this.$container&&this.$container.jsp(this.getTplDomStr()),this.callback&&this.callback.call(this,this.$container)}},t.exports=a},function(t,e){t.exports=['<div class="customModContent minheight48">',"{{ if(it) { }}","{{=it}}","{{ } }}","</div>"].join("")},function(t,e,i){var n=i(9),a=function(t,e,i){this.tpl=n,this.$container=t||!1,this.data=e,this.callback=i,this.init(),this.render()};a.prototype={type:"customWall",getTplDomStr:function(){var t=this;return MoGu.ui.getdoT().template(t.tpl)(t.data)},init:function(){},render:function(){console.log("customWall-render"),this.$container&&this.$container.jsp(this.getTplDomStr()),this.callback&&this.callback.call(this,this.$container)}},t.exports=a},function(t,e){t.exports=["{{?it.feeds && it.feeds.length > 0}}",'<div class="custom_wall_box">','<div class="title">','<span class="text_area fl">{{?it.title}}{{=it.title}}{{?}}</span>',"</div>",'<div class="feedsbox ovbox">','<div class="list_box clearfix">','<div class="wall_box clearfix">',"{{~it.feeds:item:index}}",'<div class="feed_box" data-feedid="{{=item.feedId}}">','<div class="img_box">','<a href="{{=item.link}}" class="mls-item" target="_blank">','<img class="mls-img" src="{{=item.imgPath}}" />',"</a>","</div>",'<div class="title_box">{{=item.title}}</div>','<div class="price_box clearfix">','<span class="yuan">￥</span>','<span class="num">{{=item.price}}</span>',"{{ var discount = item.discount; }}","{{ if(discount < 10){ }}",'<span class="discount">{{=discount}}折</span>',"{{ } }}","</div>","</div>","{{~}}","</div>","</div>","</div>","</div>","{{??}}","<!-- feed({{=it.title}}) data empty-->","{{?}}"].join("")},function(t,e,i){var n=i(11),a=function(t,e,i){this.tpl=n,this.$container=t||!1,this.data=e,this.callback=i,this.init(),this.render()};a.prototype={type:"picture",getTplDomStr:function(){var t=this;return MoGu.ui.getdoT().template(t.tpl)(t.data)},init:function(){},render:function(){console.log("picture-render"),this.$container&&this.$container.jsp(this.getTplDomStr()),this.callback&&this.callback.call(this,this.$container)}},t.exports=a},function(t,e){t.exports=['<div class="mod_cont picture">','{{ if(it && it != ""){ }}',"{{ if(/^http:/.test(it.link)){ }}",'<a href="{{=it.link}}" target="_blank">','<img src="{{=it.src}}">',"</a>","{{ }else{ }}","<a>",'<img src="{{=it.src}}">',"</a>","{{ } }}","{{ } }}","</div>"].join("")},function(t,e,i){var n=i(13),a=function(t,e,i){this.tpl=n,this.$container=t||!1,this.data=e,this.callback=i,this.init(),this.render()};a.prototype={type:"promotions",getTplDomStr:function(){var t=this;return MoGu.ui.getdoT().template(t.tpl)(t.data)},init:function(){},render:function(){console.log("promotions-render"),this.$container&&this.$container.jsp(this.getTplDomStr()),this.callback&&this.callback.call(this,this.$container)}},t.exports=a},function(t,e){t.exports=['<div class="mod_cont coupon clearfix">','<span title="店铺优惠" class="c_title fl"></span>','<ol class="coupon_wrap fl clearfix">',"{{ for (var i = 0, l = 4; i < l; i++) { }}",'<li {{? i == 3}} class="last" {{?}}>',"{{ if (it.list && it.list[i]) { }}",'<div class="c_item c_item_setting">',"{{? it.list[i].isShopActivity == 0 && it.list[i].type == 1}}",'<div class="coupon_t1">','<p class="c_type"><span class="c_hl">￥{{=it.list[i].cutPrice}}</span>元现金券</p>','<p class="c_info">满{{=it.list[i].limitPrice}}元即可使用</p>','<a href="javascript:;" data-id="{{=it.list[i].pid}}" data-pid="{{=it.list[i].pid}}" data-href="{{=it.list[i].href}}" class="c_btn c_apply J_coupon_apply">立即领取</a>',"</div>","{{?}}","{{? it.list[i].isShopActivity == 0 && it.list[i].type == 2}}",'<div class="coupon_t1">','<p class="c_type"><span class="c_hl">￥{{=it.list[i].cutPrice}}</span>元现金券</p>','<p class="c_info">无限制直接使用</p>','<a href="javascript:;" data-id="{{=it.list[i].pid}}" data-pid="{{=it.list[i].pid}}" data-href="{{=it.list[i].href}}" class="c_btn c_apply J_coupon_apply">立即领取</a>',"</div>","{{?}}","{{? it.list[i].isShopActivity == 1 && it.list[i].type == 1}}",'<div class="coupon_t3">','<p class="c_info">立减</p>','<p class="c_type">￥{{=it.list[i].cutPrice}}元</p>',"</div>","{{?}}","{{? it.list[i].isShopActivity == 1 && it.list[i].type == 2}}",'<div class="coupon_t2">','<p class="c_type">满{{=it.list[i].limitPrice}}立减￥{{=it.list[i].cutPrice}}元</p>',"</div>","{{?}}","{{? it.list[i].isShopActivity == 1 && it.list[i].type == 3}}",'<div class="coupon_t3">','<p class="c_info">买即送</p>','<p class="c_type">￥{{=it.list[i].cutPrice}}元现金券</p>',"</div>","{{?}}","{{? it.list[i].isShopActivity == 1 && it.list[i].type == 4}}",'<div class="coupon_t3">','<p class="c_info">满{{=it.list[i].limitPrice}}元送</p>','<p class="c_type">￥{{=it.list[i].cutPrice}}元优惠券</p>',"</div>","{{?}}","</div>","{{ } else { }}",'<div class="c_item_empty c_">',"</div>","{{ } }}","</li>","{{ } }}","</ol>","</div>"].join("")},function(t,e,i){var n=i(15),a=location.hostname.indexOf("meilishuo")>=0,s=function(t,e,i){this.tpl=n,this.$container=t||!1,this.data=e,this.callback=i,this.init(),this.render()};s.prototype={type:"puzzleImg",getTplDomStr:function(){var t=this;return this.data.isMLS=a,MoGu.ui.getdoT().template(t.tpl)(t.data)},init:function(){},render:function(){console.log("puzzleImg-render"),this.$container&&this.$container.jsp(this.getTplDomStr()),this.callback&&this.callback.call(this,this.$container)}},t.exports=s},function(t,e){t.exports=['<div class="templatebox {{if(it.isMLS){ }}{{=" center"+it.type}}{{ } }} ">','<div class="tempitem template{{=it.type}} {{if(it.isMLS){ }}{{=" mls-template"+it.type}}{{ } }}">','<ol class="clearfix">',"{{ if(it.imgsList) { }}","{{~it.imgsList:item:index}}",'<li class="li{{=index}} {{if(it.isMLS){ }}{{=" mls"+index}}{{ } }} {{if(item.imgPath == "http://s6.mogujie.cn/pic/140505/7ycvj_kqzgu2sdozbhsv2ugfjeg5sckzsew_800x800.png"){ }}noimg{{ } }}">',"{{ if(/^http/.test(item.link)){ }}",'<a href="{{=item.link}}" target="_blank">','<img alt="" src="{{=item.imgPath}}" />',"</a>","{{ }else{ }}","<a>",'<img alt="" src="{{=item.imgPath}}" />',"</a>","{{ } }}",'{{ if(item.price !== "" && item.title !== "" && item.tradeId !== undefined){ }}','<div class="infobox slideer" data-tradeid="{{=item.tradeId}}">','{{ if(item.title !== ""){ }}',"{{ if(/^http:/.test(item.link)){ }}",'<a class="title" href="{{=item.link}}" target="_blank">{{=item.title}}</a>',"{{ }else{ }}",'<a class="title">{{=item.title}}</a>',"{{ } }}","{{ } }}",'{{ if(item.price !== ""){ }}',"{{ if(/^http/.test(item.link)){ }}",'<a class="num price" href="{{=item.link}}" target="_blank">￥<span class="in-data">{{=item.price}}</span></a>',"{{ }else{ }}",'<a class="num price">￥<span class="in-data">{{=item.price}}</span></a>',"{{ } }}","{{ } }}","</div>",'<div class="mask slideer">','<a href="{{=item.link}}" target="_blank"></a>',"</div>","{{ } }}","</li>","{{~}}","{{ } }}","</ol>","</div>","</div>"].join("")},function(t,e,i){var n=i(17),a=i(18),s=function(t,e,i){this.tpl=n,this.$container=t||!1,this.data=e,this.callback=i,this.init(),this.render()};s.prototype={type:"silderBanner",getTplDomStr:function(){var t=this;return MoGu.ui.getdoT().template(t.tpl)(t.data)},init:function(){},render:function(){console.log("silderBanner(normal)-render"),this.$container&&this.$container.jsp(this.getTplDomStr()),this.initSlider(),this.callback&&this.callback.call(this,this.$container)},newSwitchable:function(t){var e=this,i=t.find(".switchbox"),n=[];return i.each(function(t,i){n[t]=new a(i,{effect:"fade",triggerType:"mouse",delay:.1,auto:!0}),e.updateHeight($(i)),$(i).find(".switchable-content a").length<2||($(i).find(".ovtext").css("display","block"),$(i).find(".switchable-nav").css("display","block"),$(i).on("click",".prev",function(){n[t].prev()}),$(i).on("click",".next",function(){n[t].next()}))}),e.switchtop=n,e.switchtop},updateHeight:function(t){if(!(t.find("img").length<=0))var e=t.find("img")[0],i=t.find(".switchable-content"),n=t.find(".prev"),a=t.find(".next"),s=function(){e.height>0&&(clearInterval(o),t.css({height:e.height}),i.css({height:e.height}),n.css({top:e.height/2-25}),a.css({top:e.height/2-25}))},o=setInterval(s,40)},initSlider:function(){console.log("  >>silderBanner(normal)-initSlider"),this.slider=this.newSwitchable(this.$container)}},t.exports=s},function(t,e){t.exports=['<div class="mod_cont sliderBanner">','<div class="tempitem">','<div class="tabbox switchbox">','<div class="switchable-content">',"{{if(it.imgList && it.imgList.length > 0) { }}","{{~it.imgList:item:index}}",'<a href="{{=item.link}}" target="_blank">','<img src="{{=item.imgPath}}">',"</a>","{{~}}","{{ } else { }}",'<span class="tips">（轮播图建议图片高度不得小于350px）</span>',"{{ } }}","</div>",'<span class="prev ovtext">上一步</span>','<span class="next ovtext">下一步</span>',"</div>","</div>","</div>"].join("")},function(t,e){var i=function(){var t="switchable-",e=".",i=t+"trigger-internal",n=t+"panel-internal",a="display",s="block",o="none",r="beforeSwitch",c="forward",l="backward",d="switch",p={},u={markupType:0,navCls:t+"nav",contentCls:t+"content",triggerCls:t+"trigger",panelCls:t+"panel",triggers:[],panels:[],triggerType:"click",activeIndex:-1,activeTriggerCls:"ks-active",hasTriggers:!0,switchTo:0,delay:1,steps:1,speed:1,auto:!1,direction:"forwards",pauseOnHover:!0,load_ajax:!1,load_url:[],load_step:!1,lazyload:!0,viewSize:[]};p.switchable=function(t,e){var i=this;return e=e||{},t.length>1?t.each(function(t,i){new p.switchable(i,e)}):("markupType"in e||(e.panelCls?e.markupType=1:e.panels&&(e.markupType=2)),i.options=$.extend({},u,e||{}),i.container=$(t),i.activeIndex=i.options.activeIndex,i._init(),i.options.lazyload&&i._star_onload(),0===i.options.load_ajax&&i.options.load_url&&i.options.load_step&&i._gettab(),i.options.effect&&i._effectsinit(),i.activeIndex>-1||("number"==typeof i.options.switchTo?i.switchTo(i.options.switchTo):(i.activeIndex=0,i.switchTo(i.activeIndex))),void(i.options.auto&&i.strat()))},p.switchable.fn=p.switchable.prototype={},p.switchable.fn.extend=p.switchable.extend=$.extend,p.switchable.fn.extend({_init:function(){var t=this,e=t.options;t._parseMarkup(),e.hasTriggers&&t._bindTriggers(),t._bindPanels(),t._setviwesize()},_parseMarkup:function(){var t,i,n,a=this,s=a.container,o=a.options,r=[],c=[];switch(o.markupType){case 0:t=s.find(e+o.navCls),t&&(r=t.children()),i=s.find(e+o.contentCls),c=i.children();break;case 1:r=s.find(e+o.triggerCls).children(),c=s.find(e+o.panelCls).children();break;case 2:r=$(o.triggers).children(),c=$(o.panels).children()}n=c.length,a.length=Math.ceil(n/o.steps),a.nav=t||o.hasTriggers&&r.eq(0)&&r.eq(0).parent(),!o.hasTriggers||a.nav&&0!=r.length||(r=a._generateTriggersMarkup(a.length)),a.triggers=$.makeArray(r),a.panels=$.makeArray(c),a._triggers=r,a._panels=c,a.content=i||c.eq(0).parent()},_setviwesize:function(){var t=this,e=t.options;e.viewSize.length>0?t.parentSize=e.viewSize:(t.parentSize=[],t.parentSize[0]=t.content.parent().width(),t.parentSize[1]=t.content.parent().height())},_generateTriggersMarkup:function(t){var e,i,n=this,a=n.options,s=document.createElement("ul");for(s.className=a.navCls,i=0;t>i;i++)e=document.createElement("li"),i===n.activeIndex&&(e.className=a.activeTriggerCls),e.innerHTML=i+1,$(s).append(e);return n.container.append(s),n.nav=$(s),$(s).children()},_bindTriggers:function(){var t=this,e=t.options,n=t.nav;t.triggers;t._triggers.addClass(i),n.delegate("."+i,"click",function(e){var i=$(e.currentTarget),n=t._getTriggerIndex(i);t._onFocusTrigger(n,e)}),"mouse"===e.triggerType&&n.delegate("."+i,"mouseenter",function(e){var i=$(e.currentTarget),n=t._getTriggerIndex(i);t._onMouseEnterTrigger(n,e)}).delegate("mouseleave","."+i,function(){t._onMouseLeaveTrigger()})},_bindPanels:function(){var t=this,e=t._panels;e.addClass(n)},_onFocusTrigger:function(t,e){var i=this;i._triggerIsValid(t)&&(this._cancelSwitchTimer(),i.switchTo(t,void 0,i.getDomEvent(e)))},_onMouseEnterTrigger:function(t,e){var i=this;if(i._triggerIsValid(t)){var n=i.getDomEvent(e);i.switchTimer=setTimeout(function(){i.switchTo(t,void 0,n)},1e3*i.options.delay)}},_onMouseLeaveTrigger:function(){this._cancelSwitchTimer()},_triggerIsValid:function(t){return this.activeIndex!==t},_cancelSwitchTimer:function(){var t=this;t.switchTimer&&(clearTimeout(t.switchTimer),t.switchTimer=void 0)},_getTriggerIndex:function(t){var e=this;return e._triggers.index(t)},_resetLength:function(){this.length=this._getLength()},_getLength:function(t){var e=this,i=e.options;return void 0===t&&(t=e.panels.length),Math.ceil(t/i.steps)},getDomEvent:function(t){var e={};return e.type=t.originalEvent.type,e.target=t.originalEvent.target||t.originalEvent.srcElement,{originalEvent:e}},strat:function(){var t=this,e=t.options;t.auto_switch,t.auto_switch=setTimeout(function(){t._autocycling()},3e3*e.speed),t.options.pauseOnHover&&(t.container.mouseenter(function(){t.stop()}),t.container.mouseleave(function(){t.auto_switch&&(clearTimeout(t.auto_switch),t.auto_switch=void 0),t.auto_switch=setTimeout(function(){t._autocycling()},3e3*e.speed)}))},stop:function(){var t=this;t.auto_switch&&(clearTimeout(t.auto_switch),t.auto_switch=void 0)},_autocycling:function(){var t=this,e=t.options.speed;t.auto_switch&&(clearTimeout(t.auto_switch),t.auto_switch=void 0),t.next(),t.auto_switch=setTimeout(function(){t._autocycling()},3e3*e)},_star_onload:function(){var t=this,e=t.container.find("IMG");e.each(function(t,e){$(e).attr("src",$(e).attr("d-src"))})},switchTo:function(t,e,i,n){var a=this,s=a.options,o=a.triggers,c=a.panels,l=a.activeIndex,d=s.steps,p=l*d,u=t*d;return a._triggerIsValid(t)?(jQuery.event.trigger(r,{fromIndex:p,toIndex:u,panels:a.panels}),s.hasTriggers&&a._switchTrigger(l>-1?o[l]:null,o[t]),a.activeIndex=t,a._switchView(l>-1?c.slice(p,p+d):null,c.slice(u,u+d),l,t,e,i,function(){n&&n.call(a,t)}),1===s.load_ajax&&$.isArray(s.load_url)===!1&&a._gettab(p+d),a):a},_gettab:function(t){var e=this,i=e.options,n=e.panels;$.isArray(i.load_url)?$(i.load_url).each(function(t,i){e._startajax(i,n[t])}):(t&&(i.load_step=t),e._startajax(i.load_url,n[i.load_step]))},_startajax:function(t,e){$(e).jsp('<div class="ajload_img"><img src="loadimg" /></div>'),$.ajax({url:t,type:"GET",dataType:"jsp",success:function(t){$(".ajload_img").remove(),$(e).jsp(t)}})},_switchTrigger:function(t,e){var i=this.options.activeTriggerCls;t&&$(t).removeClass(i),$(e).addClass(i)},_switchView:function(t,e,i,n,r,c,l){var d=this;t&&$(t).css(a,o),$(e).css(a,s),setTimeout(function(){d._fireOnSwitch(i,n)},0),l&&l.call(this)},_fireOnSwitch:function(t,e,i){jQuery.event.trigger(d,{fromIndex:t,currentIndex:e})},prev:function(t){var e=this,i=e.activeIndex;e.switchTo(i>0?i-1:e.length-1,l,t)},next:function(t){var e=this,i=e.activeIndex;e.switchTo(i<e.length-1?i+1:0,c,t)},destroy:function(){var t=this;t.container.remove(),t.nav=null,t.content=null,t.container=null,t.triggers=[],t.panels=[]}});var a="display",s="block",o="none",h="opacity",g="z-index",f="position",m="relative",v="absolute",_="scrollx",w="scrolly",x="fade",y="left",b="top",T="float",k="px",S="none",I=1e3;return p.switchable.fn.extend({_effectsinit:function(){var t=this,e=t.options,i=e.effect,n=t.panels,r=t.content,c=e.steps,l=n[0],d=t.activeIndex;if(can_c=e.effect===_||w,t.viewSize=[e.viewSize[0]||l&&l.offsetWidth*c,e.viewSize[1]||l&&l.offsetHeight*c],t.viewSize[0]&&(e.effect&&(i=e.effect),e.duration&&(I=e.duration),i!==o))switch(t._panels.css(a,s),i){case _:case w:if(r.css(f,v),"static"==r.parent().css(f)&&r.parent().css(f,m),i===_&&(t._panels.css(n,T,y),r.width("9999px")),e.circle&&can_c){if(e.effect===_)var p=t.parentSize[0]/$(t.panels[0]).width();else var p=t.parentSize[1]/$(t.panels[0]).height();t.max=t.panels.length,t.add_stage(p)}break;case x:var u,b=d*c,k=b+c-1;"static"==r.css(f)&&r.css(f,m),t._panels.each(function(t,e){u=t>=b&&k>=t;var i=u?1:0,n=u?9:1;$(e).css(h,i).css(f,v).css(g,n)})}},none:function(t,e,i){t&&t.css(a,o),e.css(a,s),i&&i()},fade:function(t,e,i){t&&1!==t.length;var n=this,a=n.options,s=t?t.eq(0):null,o=e.eq(0);a.duration&&(I=a.duration),n.anim&&(n.anim.stop(),s.css(g,1).css(h,0),o.css(g,9)),o.css(h,1),s?(n.anim=s.animate({opacity:0},I,function(){n.anim=void 0,o.css(g,9),s.css(g,1),i&&i()}),n.anim.toEl=o):(o.css(g,9),i&&i())},_autocycling:function(){var t=this,e=t.options,i=t.options.speed,n=y;can_c=e.effect===_||w,e.effect===w&&(n=b),t.auto_switch&&(clearTimeout(t.auto_switch),t.auto_switch=void 0),e.circle&&can_c&&t.activeIndex>=t.max&&(t.content.css(n,0),t.activeIndex=0),t.next(),t.auto_switch=setTimeout(function(){t._autocycling()},3e3*i)},add_stage:function(t){for(var e=this,i=t,n=0;t>=n;n++){var i=$(e.panels[n]).clone();e.content.append(i)}var a=e.content.children();e.panels=$.makeArray(a),e._resetLength()},scroll:function(t,e,i,n,a){var s=this,o=s.options,r=o.effect===_,c=s.viewSize[r?0:1]*a,l={};o.duration&&(I=o.duration),l[r?y:b]=-c+k,s.anim&&s.anim.stop(),t?s.anim=s.content.animate(l,I,function(){s.anim=void 0,i&&i()}):(s.content.css(l),i&&i())},_switchView:function(t,e,i,n,a,s,o){var r=this,c=r.options;if(c.effect&&(S=c.effect),S===_||S===w)var l=r.scroll;else var l=$.isFunction(S)?S:r[S];t=$(t),e=$(e),l.call(r,t,e,function(){r._fireOnSwitch(i,n),o&&o.call(r)},i,n,a)}}),p.switchable};t.exports=i()},function(t,e,i){var n=i(20),a=function(t,e,i){this.tpl=n,this.$container=t||!1,this.data=e,this.callback=i,this.init(),this.render()};a.prototype={type:"singlePicture",getTplDomStr:function(){var t=this;return t.data.merge_left=125,MoGu.ui.getdoT().template(t.tpl)(t.data)},init:function(){},render:function(){console.log("singlePicture-render"),this.$container&&this.$container.jsp(this.getTplDomStr()),this.callback&&this.callback.call(this,this.$container)}},t.exports=a},function(t,e){t.exports=['<div class="mod_cont singlePicture">',"{{?it.type == 2}}",'<img src={{=it.pic_url}} class="single-img"/>',"{{~it.maps:coord:index}}","{{?coord.coords.length == 4}}",'<a href={{=coord.link_url}}><div class="mark" style="width:{{=coord.coords[2]-coord.coords[0]}}px;height:{{=coord.coords[3]-coord.coords[1]}}px;left:{{=Number(coord.coords[0])+Number(it.merge_left)}}px;top:{{=coord.coords[1]}}px;"></div>',"</a>","{{?}}","{{~}}","{{??it.type == 1}}","<a href={{=it.link_url}}>",'<img src={{=it.pic_url}} class="single-img"/>',"<a/>","{{?}}","</div>"].join("")},function(t,e,i){var n=i(22),a=function(t,e,i){this.tpl=n,this.$container=t||!1,this.data=e,this.callback=i,this.init(),this.render()};a.prototype={type:"topBanner",getTplDomStr:function(){var t=this;return MoGu.ui.getdoT().template(t.tpl)(t.data)},init:function(){},render:function(){console.log("topBanner-render"),this.$container&&this.$container.jsp(this.getTplDomStr()),this.callback&&this.callback.call(this,this.$container)}},t.exports=a},function(t,e){t.exports=['<div class="mod_cont topbanner">','<a class="shop_bg_img" href="{{=it.shopurl}}"','data-src="',"{{ if (it.src) { }}","{{=it.src}}","{{ } else { }}","http://s7.mogucdn.com/pic/140807/sp1ku_ieydomtcmftdenzymiytambqgiyde_1920x150.jpg","{{ } }}",'"','style="background: url(',"{{ if (it.src) { }}","{{=it.src}}","{{ } else { }}","http://s7.mogucdn.com/pic/140807/sp1ku_ieydomtcmftdenzymiytambqgiyde_1920x150.jpg","{{ } }}",') center no-repeat"',"></a>","</div>"].join("")},function(t,e,i){var n=i(24),a=function(t,e,i){this.tpl=n,this.$container=t||!1,this.data=e,this.callback=i,this.init(),this.render()};a.prototype={type:"topNav",getTplDomStr:function(){var t=this;return MoGu.ui.getdoT().template(t.tpl)(t.data)},init:function(){},render:function(){console.log("topNav-render"),this.$container&&this.$container.jsp(this.getTplDomStr()),this.callback&&this.callback.call(this,this.$container)}},t.exports=a},function(t,e){t.exports=['<div class="mod_cont topNav">','<ol class="clearfix">',"<li>",'{{var newShopUrl = it.shopurl+"/";console.log(newShopUrl);}}','<a href="{{=newShopUrl}}" class="abc">',"首页1","</a>","</li>","{{ if(it.isShow == 0){ }}","{{ } else { }}",'<li class="all">','<a href="{{=it.shopurl}} /index/total">',"全部商品","</a>","</li>","{{ } }}","{{ if (it.navList) { }}","{{ for (var i = 0, l = it.navList.length; i < l; i++) { }}","<li>",'<a href="{{=it.navList[i].link}}">',"{{=it.navList[i].name}}","</a>","</li>","{{ } }}","{{ } }}","</ol>","</div>"].join("")},function(t,e,i){var n=i(26),a=i(18),s=location.hostname.indexOf("meilishuo")>=0,o=function(t,e,i){this.tpl=n,this.$container=t||!1,this.data=e,this.callback=i,this.init(),this.render()};o.prototype={type:"topSilderBanner",getTplDomStr:function(){var t=this;return t.data.isMLS=s,MoGu.ui.getdoT().template(t.tpl)(t.data)},init:function(){},render:function(){console.log("topSilderBanner-render"),this.$container&&this.$container.jsp(this.getTplDomStr()),this.initSlider(),this.callback&&this.callback.call(this,this.$container)},newSwitchable:function(t){var e=this,i=t.find(".switchbox"),n=[];return i.each(function(t,i){n[t]=new a(i,{effect:"fade",triggerType:"mouse",delay:.1,auto:!0}),e.updateHeight($(i)),$(i).find(".switchable-content a").length<2||($(i).find(".ovtext").css("display","block"),$(i).find(".switchable-nav").css("display","block"),$(i).on("click",".prev",function(){n[t].prev()}),$(i).on("click",".next",function(){n[t].next()}))}),e.switchtop=n,e.switchtop},updateHeight:function(t){if(!(t.find("img").length<=0))var e=t.find("img")[0],i=t.find(".switchable-content"),n=t.find(".prev"),a=t.find(".next"),s=function(){e.height>0&&(clearInterval(o),t.css({height:e.height}),i.css({height:e.height}),n.css({top:e.height/2-25}),a.css({top:e.height/2-25}))},o=setInterval(s,40)},initSlider:function(){console.log("  >>topSilderBanner-initSlider"),this.slider=this.newSwitchable(this.$container)}},t.exports=o},function(t,e){t.exports=['<div class="mod_cont topSliderBanner">','<div class="tempitem">','<div class="tabbox switchbox">','<div class="switchable-content {{if(it.isMLS){ }}mls-switchable-content{{ } }}">',"{{if(it.imgList && it.imgList.length > 0) { }}","{{~it.imgList:item:index}}",'<a href="{{=item.link}}" style="background: url({{=item.imgPath}}) 50% 50% no-repeat white;" target="_blank"></a>',"{{~}}","{{ } else { }}",'<span class="tips">（轮播图大小必须是1920*400）</span>',"{{ } }}","</div>",'<span class="prev ovtext">上一步</span>','<span class="next ovtext">下一步</span>',"</div>","</div>","</div>"].join("")},function(t,e){
var i=i||{},n=location.hostname.indexOf("meilishuo")>=0?"mlspc":"mgjpc";i.feedList=function(){var t,e={},i={$feedList:$("#J_ShopFeedList"),bottomHeight:200,pack:0,isLoading:!1,hasData:!0,page:parseInt($("#pageindex").val())||1,loadType:"",order:$(".shop-feed .current").data("order")||"",categoryId:$("#categoryId").val()||"",shopbaseurl:$("#shopbaseurl").val(),shopwebtag:1},a=function(a){t=$.extend({},i,a),e.page=t.page,e.pack=t.pack,e.order=t.order,e.categoryId=t.categoryId,e.shopId=t.shopId||$("#shopId").val(),e.shopwebtag=t.shopwebtag,e.platform=n,t.isLoading||(t.isLoading=!0,console.log("ceshi",e.platform),$.ajax({url:"ajax/feeds/1",data:e,type:"GET",dataType:"json",success:function(e){if(!e)return void console.warn("数据异常:",e);if(e.success)if(!e.data||!e.data.goodsList||e.data.goodsList.length<=0){t.hasData&&t.pack>1&&console.warn("本屏请求到的数据为空(或者异常),说明上一屏数据(pack="+(t.pack-1)+")时的isEnd字段错误(应该设置isEnd为true),导致hasData任旧为true.");var i=$("#shopFeed"),n=$("#J_ShopEmpty");0==i.find(".list .item").length&&(console.log("没有查到商品且当前的.item数据为空"),i.hide(),n.show()),t.hasData=!1}else{o(e.data);for(var a=e.data.goodsList,s=[],r=[],c=[],l=0,d=a.length;d>l;l++)r.push(a[l].iid),s.push(a[l].acm),c.push(a[l].index);logger.log(8e3,{acms:s,iids:r,indexs:c})}else console.warn("Failed:",e)},complete:function(e,i){t.isLoading=!1}}))},s=function(t){var e="";if(t&&t.length){for(var i=0;i<t.length;i++){var n=t[i];0!=n.discount?$discHtml='<span class="discount">'+n.discount+"折</span>":$discHtml="",$dom='<div class="item i_w_f youdian" tid="0" iid=""><a href="'+n.link+'" class="img mls-item" target="_blank">'+(n.hasTag?'<span class="icon_event_lefttop iwf_icon_taglist"><img src="'+(n.tagImage||"")+'"></span>':"")+'<img width="225" class="mls-img" src="'+n.fullImage+'" alt="'+n.description+'"></a><div class="favorite" style="position: relative;"><a class="favaImg" href="javascript:;" data-tradeitemid="'+n.iid+'" tradeitemid="'+n.iid+'" tid="0"></a></div><p class="title"><a href="'+n.link+'" target="_blank">'+n.title+'</a></p><div class="goods-info clearfix"><b class="price"><i>￥</i>'+n.price+"</b>"+$discHtml+'<span class="fav-num">'+n.cfav+"</span></div></div>",e+=$dom}return e}},o=function(e){var i=s(e.goodsList);if("scroll"==t.loadType?t.$feedList.append(i):t.$feedList.jsp(i),e.data.isEnd){t.hasData=!1;var n=Math.ceil(e.data.total/100);if(n>1){var a="";t.page>1&&(a=a+'<a href="?sort=desc&categoryId='+t.categoryId+"&order="+t.order+"&page="+parseInt(t.page-1)+'#shopFeed" rel="nofollow">&lt;上一页</a>');for(var o=1;n>=o;o++)a=o==t.page?a+'<a class="c">'+o+"</a>":a+'<a href="?sort=desc&categoryId='+t.categoryId+"&order="+t.order+"&page="+o+'#shopFeed" rel="nofollow">'+o+"</a>";t.page<n&&(a=a+'<a href="?sort=desc&categoryId='+t.categoryId+"&order=hotSales_it&page="+(parseInt(t.page)+1)+'#shopFeed" rel="nofollow">下一页&gt;</a>'),$(".pagination").append(a)}}},r=function(e){t=$.extend({},i,e),$(window).on("scroll",function(){var e,i,n;e=document.body.scrollHeight,i=document.body.scrollTop||document.documentElement.scrollTop,n=document.body.clientHeight>=e?document.documentElement.clientHeight:document.body.clientHeight,t&&e-i-n<t.bottomHeight&&t.hasData&&!t.isLoading&&a({loadType:"scroll",pack:++t.pack})})};return{init:function(){console.log("defaultFeedWall-init...."),r()},load:function(e){console.log("defaultFeedWall-load..."),t=$.extend({},i,e),t.hasData&&!t.isLoading&&a({loadType:"scroll",pack:++t.pack})}}}(),t.exports=i}]);